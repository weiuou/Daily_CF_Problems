**提示 1：** 期望相当于在算均值。分子分母分别是什么？

先看提示。

分母是这个凸多边形内的点，所以应该是凸多边形的面积。

分子是每个单位面积乘以该点被三角形覆盖的次数。

换个角度来看，每个三角形会让一个区域内的点被算一次。而每个三角形的结果加到一起，也就得到了每个点被覆盖的次数。

所以我们相当于要算所有三角形的面积和，除以凸多边形的面积。

后者很容易，把凸多边形拆成若干个三角形就行了。

前者，设每个点的坐标是 $P_i$ 。则我们需要求：

$\sum\limits_{1\leq i\lt j\lt k\leq n}(P_j-P_i)\times (P_k-P_j)$

考虑枚举中间的点 $j$ ，则对于某个 $j$ ，我们求的是：

$\sum\limits_{i=1}^{j-1}\sum\limits_{k=j+1}^{n}(P_j-P_i)\times (P_k-P_j)=\left(\sum\limits_{i=1}^{j-1}(P_j-P_i)\right)\left(\sum\limits_{k=j+1}^{n}(P_k-P_j)\right)$

这两个向量在遍历 $j$ 的过程中就变得很容易维护了。

注意中间可能爆 `long long` ，可以使用浮点数或 `__int128_t` 。

时间复杂度为 $\mathcal{O}(n)$ 。

### 具体代码如下——

Python 做法如下——

```Python []
def main():
    n = II()
    xs = []
    ys = []
    
    for _ in range(n):
        x, y = MII()
        xs.append(x)
        ys.append(y)
    
    total_area = 0
    for i in range(2, n):
        dx1, dy1 = xs[i - 1] - xs[0], ys[i - 1] - ys[0]
        dx2, dy2 = xs[i] - xs[0], ys[i] - ys[0]
        total_area += dx1 * dy2 - dy1 * dx2
    
    total_triangle_area = 0
    
    pref_x = 0
    pref_y = 0
    
    suff_x = sum(xs)
    suff_y = sum(ys)
    
    for i in range(n):
        x = xs[i]
        y = ys[i]
        
        suff_x -= x
        suff_y -= y
        
        total_triangle_area += (i * x - pref_x) * (suff_y - (n - i - 1) * y) - (i * y - pref_y) * (suff_x - (n - i - 1) * x)
        
        pref_x += x
        pref_y += y
    
    print(total_triangle_area / total_area)
```

C++ 做法如下——

```cpp []
int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);

    int n;
    cin >> n;

    vector<pair<int, int>> pts(n);
    for (auto &[x, y]: pts) cin >> x >> y;

    long long total_area = 0;
    for (int i = 2; i < n; i ++) {
        int dx1 = pts[i - 1].first - pts[0].first, dy1 = pts[i - 1].second - pts[0].second;
        int dx2 = pts[i].first - pts[0].first, dy2 = pts[i].second - pts[0].second;
        total_area += 1ll * dx1 * dy2 - 1ll * dy1 * dx2;
    }

    __int128_t total_triangle_area = 0, one = 1;

    long long pref_x = 0, pref_y = 0, suff_x = 0, suff_y = 0;
    for (auto &[x, y]: pts) suff_x += x, suff_y += y;

    for (int i = 0; i < n; i ++) {
        auto [x, y] = pts[i];
        suff_x -= x, suff_y -= y;
        total_triangle_area += one * (1ll * i * x - pref_x) * (suff_y - 1ll * (n - i - 1) * y) - one * (1ll * i * y - pref_y) * (suff_x - 1ll * (n - i - 1) * x);
        pref_x += x, pref_y += y;
    }

    cout << fixed << setprecision(15) << (long double)1 * total_triangle_area / total_area;

    return 0;
}
```