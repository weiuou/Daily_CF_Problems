**提示 1：** 距离越远，对 $A_i$ 的限制就越松。

**提示 2：** 好像 $A_i$ 上界并不大。

我们观察要满足的式子 $|i-j|^3\geq A_j$ 。在 $i,j$ 足够远的情况下，对 $A_j$ 的限制也就足够小。

同时， $A_j$ 上界只有 $10^9$ ，所以只要 $i,j$ 距离达到了 $1000$ ，这个 $j$ 一定符合要求。

所以，当数组长度大于等于 $2000$ 的时候，数组的最左端和最右端总有一侧是满足要求的，因为总有一个跟查询的位置至少距离为 $1000$ ，直接输出对应的结果即可。

否则，数组长度不足 $2000$ ，直接遍历每一个位置看是否满足要求即可。复杂度刚好是不超标的，相当于 $2000q$ 。

时间复杂度为 $\mathcal{O}(n+q\min(M^{1/3},n))$ 。

### 具体代码如下——

Python 做法如下——

```Python []
def main():
    n = II()
    nums = LII()
    
    q = II()
    outs = []
    
    cubes = [i ** 3 for i in range(n + 1)]
    
    for _ in range(q):
        query = LII()
        
        if query[0] == 1:
            nums[query[1] - 1] = query[2]
        else:
            idx = query[1]
            
            if n - idx >= 1000: outs.append(n)
            elif idx - 1 >= 1000: outs.append(1)
            else:
                idx -= 1
                for j in range(n):
                    if cubes[abs(idx - j)] >= nums[j]:
                        outs.append(j + 1)
                        break
                else:
                    outs.append(-1)
    
    print('\n'.join(map(str, outs)))
```

C++ 做法如下——

```cpp []
int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);

    int n;
    cin >> n;

    vector<int> nums(n);
    for (auto &v: nums) cin >> v;

    vector<int> cubes(1000);
    for (int i = 0; i < 1000; i ++)
        cubes[i] = i * i * i;

    int q;
    cin >> q;

    while (q --) {
        int t;
        cin >> t;

        if (t == 1) {
            int idx, val;
            cin >> idx >> val;
            nums[idx - 1] = val;
        }
        else {
            int idx;
            cin >> idx;

            if (n - idx >= 1000) cout << n << '\n';
            else if (idx - 1 >= 1000) cout << 1 << '\n';
            else {
                idx --;
                int ans = -2;
                for (int i = 0; i < n; i ++) {
                    if (cubes[abs(i - idx)] >= nums[i]) {
                        ans = i;
                        break;
                    }
                }
                cout << ans + 1 << '\n';
            }
        }
    }

    return 0;
}
```